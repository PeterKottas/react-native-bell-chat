!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react-native"));else if("function"==typeof define&&define.amd)define(["react-native"],t);else{var r="object"==typeof exports?t(require("react-native")):t(e["react-native"]);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/lib/",r(r.s=11)}([function(e,t,r){"use strict";e.exports=r(12)},function(e,t,r){"use strict";r.d(t,"b",function(){return o});var n=r(0),s=(r.n(n),r(17));const o={userBubble:{},recipientBubble:{},chatBubble:{},text:{},createdOn:{},recipientCreatedOn:{},loadingSpinnerColor:"rgba(255, 255, 255, 0.55)",isSendIconColor:"#cddc39",systemChatBubbleContainerStyle:{}};t.a=class extends n.Component{constructor(e){super(e),this.state={mouseOverLastSeenContainer:!1}}render(){if(!this.props.message)return null;const{yourAuthorId:e}=this.props;let{bubbleStyles:t}=this.props;t=t||o;const{userBubble:r,chatBubble:a,text:i,recipientBubble:l}=t,c=this.props.message.authorId===e,u=Object.assign({},s.a.chatBubble,c?{}:s.a.recipientChatBubble,c?s.a.chatBubbleOrientationNormal:s.a.recipientChatBubbleOrientationNormal,this.props.isFirstInGroup&&(c?s.a.firstChatBubbleInGroup:s.a.recipientFirstChatBubbleInGroup),this.props.isLastInGroup&&(c?s.a.lastChatBubbleInGroup:s.a.recipientLastChatBubbleInGroup),this.props.isCenterInGroup&&(c?s.a.centerChatBubbleInGroup:s.a.recipientCenterChatBubbleInGroup),a,c?r:l);return n.createElement("div",{style:Object.assign({},s.a.chatBubbleWrapper),className:"react-native-bell-chat__chat-bubble"},n.createElement("div",{style:u},n.createElement("p",{style:Object.assign({},s.a.p,i)},this.props.message.message),this.props.message.createdOn&&n.createElement("span",{className:"react-native-bell-chat__chat-bubble__created-on",style:Object.assign({},s.a.createdOn,c?t.createdOn:t.recipientCreatedOn),title:this.props.message.createdOn.toLocaleString()},this.props.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),void 0!==this.props.message.isSend&&c&&n.createElement("span",{className:"react-native-bell-chat__chat-bubble__is-send",style:Object.assign({},s.a.isSend),title:this.props.message.isSend?"Send":"Sending"},this.props.message.isSend?n.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",preserveAspectRatio:"xMidYMid",style:{background:"none"}},n.createElement("path",Object.assign({fill:t.isSendIconColor?t.isSendIconColor:o.isSendIconColor},{},{d:"M9,1.7L8.6,1.4C8.5,1.3,8.3,1.3,8.2,1.4L3.9,7C3.8,7.1,3.6,7.1,3.5,7c0,0,0,0,0,0L1.7,5.3c-0.1-0.1-0.3-0.1-0.4,0L1,5.6 C0.9,5.7,0.9,5.9,1,6l2.6,2.6c0.1,0.1,0.3,0.1,0.4,0L9,2.1C9.1,2,9.1,1.8,9,1.7z"}))):n.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-eclipse",style:{background:"none"}},n.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50",fill:t.loadingSpinnerColor?t.loadingSpinnerColor:o.loadingSpinnerColor,transform:"rotate(78 50 52.5)"},n.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 52.5;360 50 52.5",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))),this.props.showRecipientLastSeenMessage&&this.props.lastSeenByAuthors&&this.props.lastSeenByAuthors.length>0&&this.props.customLastSeenAvatar&&n.createElement("div",{className:"react-native-bell-chat__chat-bubble__last-seen-by__container",style:s.a.lastSeenByContainer,onMouseEnter:()=>this.setState({mouseOverLastSeenContainer:!0}),onMouseLeave:()=>this.setState({mouseOverLastSeenContainer:!1}),title:"Last seen by "+this.props.lastSeenByAuthors.map(e=>e.name).join(", ").replace(/,(?!.*,)/gim," and")},this.props.lastSeenByAuthors.map((e,t)=>n.createElement(this.props.customLastSeenAvatar,{key:t,author:e,containerStyle:Object.assign({},t>0&&!this.state.mouseOverLastSeenContainer?{marginTop:-12}:{marginTop:-4},{zIndex:100+t})}))))}}},function(e,t,r){"use strict";var n=r(0),s=(r.n(n),r(4));r.n(s);const o={container:{position:"absolute",left:-50,top:0,width:40,height:40,backgroundColor:"rgb(153, 153, 153)",borderRadius:20,borderTopRightRadius:5,alignContent:"center",alignItems:"center",justifyContent:"center"},text:{color:"rgb(255,255,255)",lineHeight:40,fontWeight:"400",textAlign:"center"}};t.a=(e=>e.author&&n.createElement(s.View,{style:[o.container,e.containerStyle]},n.createElement(s.Text,{style:[o.text]},e.author.avatarName?e.author.avatarName:e.author.name.split(" ").map(e=>e[0]).join("").toUpperCase().substr(0,3))))},function(e,t,r){"use strict";var n=r(0),s=(r.n(n),r(1));const o={textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"};t.a=(e=>{let{bubbleStyles:t}=e;t=t||s.b;const r=e.message.createdOn&&e.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return e.message&&n.createElement("div",{className:"react-native-bell-chat__chat-bubble react-native-bell-chat__chat-bubble--system",style:Object.assign({},o,t.systemChatBubbleContainerStyle)},r&&n.createElement("span",{className:"react-native-bell-chat__chat-bubble--system__created-on",title:e.message.createdOn.toLocaleString()},r,":"," "),e.message.message)})},function(t,r){t.exports=e},function(e,t,r){"use strict";var n=r(0);r.n(n);const s={container:{position:"absolute",bottom:2,left:0,right:0,color:"rgb(204, 204, 204)",textAlign:"center"}};t.a=(e=>e.typingAuthors&&e.typingAuthors.length>0&&n.createElement("div",{className:"react-native-bell-chat__is-typing__container",style:s.container},e.typingAuthors.map(e=>e.name).join(", ").replace(/,(?!.*,)/gim," and")+(1===e.typingAuthors.length?" is ":" are ")+"typing"))},function(e,t,r){"use strict";var n=r(0),s=(r.n(n),r(4));r.n(s);const o={chatHistory:{padding:"0 10px"}};t.a=class extends n.Component{constructor(e){super(e),this.clientHeight=0,this.scrollHeight=0,this.scrollTop=0}render(){return n.createElement(s.ScrollView,{onLayout:e=>{this.clientHeight=e.nativeEvent.layout.height},contentContainerStyle:{padding:10},ref:e=>{this.scrollContainer=e,this.props.apiRef&&this.props.apiRef({scrollToBottom:(t=!0)=>e&&e.scrollToEnd({animated:t}),scrollTo:(t,r=!0)=>e&&e.scrollTo({y:t,animated:r}),scrolledToBottom:()=>this.clientHeight+this.scrollTop===this.scrollHeight,scrolledToLoadThreshold:()=>this.scrollContainer&&this.scrollTop<=this.props.loadOldMessagesThreshold,scrollTop:()=>this.scrollContainer&&this.scrollTop,scrollHeight:()=>this.scrollContainer&&this.scrollHeight,clientHeight:()=>this.scrollContainer&&this.clientHeight})},style:[o.chatHistory,void 0!==this.props.maxHeight?{maxHeight:this.props.maxHeight}:{},void 0!==this.props.minHeight?{minHeight:this.props.minHeight}:{},this.props.containerStyles],onScroll:e=>{this.scrollContainer&&e.nativeEvent.contentOffset.y<=this.props.loadOldMessagesThreshold&&this.props.onLoadOldMessages(),this.scrollTop=e.nativeEvent.contentOffset.y},scrollEventThrottle:16},n.createElement(s.View,{onLayout:e=>{this.scrollHeight=e.nativeEvent.layout.height+20}},this.props.children))}}},function(e,t,r){"use strict";var n=r(0);r.n(n);const s={width:20,height:20,lineHeight:"20px",fontWeight:400,fontSize:10,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:10,textAlign:"center",transition:"0.3s all ease-in-out",display:"block",position:"relative"};t.a=(e=>e.author&&n.createElement("div",{style:Object.assign({},s,e.containerStyle),className:"react-native-bell-chat__last-seen-avatar"},n.createElement("span",{style:{pointerEvents:"none"}},e.author.lastSeenAvatarName?e.author.lastSeenAvatarName:e.author.name[0].toUpperCase())))},function(e,t,r){"use strict";var n=r(0),s=(r.n(n),r(1)),o=r(3),a=r(18),i=r(2);class l extends n.Component{constructor(e){super(e)}renderGroup(e,t){const{bubblesCentered:r,bubbleStyles:i,showRecipientAvatar:l,customChatBubble:c,customSystemChatBubble:u,showRecipientLastSeenMessage:p,customLastSeenAvatar:h}=this.props,d=c||s.a,f=u||o.a,g=e.map((s,o)=>{const a={key:o,yourAuthorId:this.props.yourAuthorId,author:t,message:s,bubblesCentered:r,bubbleStyles:i,isFirstInGroup:0===o,isLastInGroup:o===e.length-1&&e.length>1,isCenterInGroup:o<e.length-1&&e.length>1,lastSeenByAuthors:this.props.authors&&this.props.authors.filter(e=>void 0!==e.lastSeenMessageId&&e.lastSeenMessageId===s.id),showRecipientLastSeenMessage:p,customLastSeenAvatar:h};return void 0!==s.authorId?n.createElement(d,Object.assign({},a)):n.createElement(f,Object.assign({},a))}),m=t&&this.props.yourAuthorId===t.id;return n.createElement("div",{style:a.a.chatBubbleWrapper},!m&&l&&t&&this.props.customAvatar&&this.props.customAvatar({author:this.props.author}),g)}render(){const{messages:e,author:t}=this.props;return this.renderGroup(e,t)}}t.a=l,l.defaultProps={messages:[],author:void 0,customAvatar:i.a,showRecipientLastSeenMessage:!1}},function(e,t,r){"use strict";var n=r(0);r.n(n);const s={textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"};t.a=(e=>e.date&&n.createElement("div",{className:"react-native-bell-chat__date-row",style:Object.assign({},s,e.containerStyles),title:e.date.toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})},e.date.toLocaleDateString()))},function(e,t,r){"use strict";var n=r(0);r.n(n);const s={display:"flex",marginBottom:10},o=e=>{const{containerStyles:t}=e;return n.createElement("div",{className:"react-native-bell-chat__loading-messages",style:Object.assign({},s,t)},n.createElement("svg",{width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none",margin:"auto",fill:e.spinnerColor,opacity:e.isVisible?1:0,transition:"0.3s all ease-in-out"}},n.createElement("title",null,"Loading messages"),n.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 46 0 0 1 10 50",transform:"rotate(42 50 53)"},n.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 53;360 50 53",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))};o.defaultProps={spinnerColor:"rgb(0, 132, 255)"},t.a=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=r(2),o=r(5),a=r(6),i=r(7),l=r(8),c=r(19),u=r(22),p=r(3),h=r(9),d=r(10);r.d(t,"ChatFeed",function(){return c.a}),r.d(t,"ChatInput",function(){return u.a}),r.d(t,"LoadingMessages",function(){return d.a}),r.d(t,"DateRow",function(){return h.a}),r.d(t,"ChatBubble",function(){return n.a}),r.d(t,"SystemChatBubble",function(){return p.a}),r.d(t,"BubbleGroup",function(){return l.a}),r.d(t,"Avatar",function(){return s.a}),r.d(t,"LastSeenAvatar",function(){return i.a}),r.d(t,"IsTyping",function(){return o.a}),r.d(t,"ChatScrollArea",function(){return a.a})},function(e,t,r){"use strict";
/** @license React v16.3.2
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(13),s=r(14),o=r(15),a=r(16),i="function"==typeof Symbol&&Symbol.for,l=i?Symbol.for("react.element"):60103,c=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,p=i?Symbol.for("react.strict_mode"):60108,h=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.async_mode"):60111,g=i?Symbol.for("react.forward_ref"):60112,m="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t=arguments.length-1,r="http://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);s(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function v(e,t,r){this.props=e,this.context=t,this.refs=o,this.updater=r||y}function S(){}function C(e,t,r){this.props=e,this.context=t,this.refs=o,this.updater=r||y}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&b("85"),this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=v.prototype;var w=C.prototype=new S;w.constructor=C,n(w,v.prototype),w.isPureReactComponent=!0;var O={current:null},A=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,r){var n=void 0,s={},o=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)A.call(t,n)&&!x.hasOwnProperty(n)&&(s[n]=t[n]);var i=arguments.length-2;if(1===i)s.children=r;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps)void 0===s[n]&&(s[n]=i[n]);return{$$typeof:l,type:e,key:o,ref:a,props:s,_owner:O.current}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var L=/\/+/g,M=[];function R(e,t,r,n){if(M.length){var s=M.pop();return s.result=e,s.keyPrefix=t,s.func=r,s.context=n,s.count=0,s}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function T(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function E(e,t,r,n){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var o=!1;if(null===e)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case l:case c:o=!0}}if(o)return r(n,e,""===t?"."+j(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){var i=t+j(s=e[a],a);o+=E(s,i,r,n)}else if(null===e||void 0===e?i=null:i="function"==typeof(i=m&&e[m]||e["@@iterator"])?i:null,"function"==typeof i)for(e=i.call(e),a=0;!(s=e.next()).done;)o+=E(s=s.value,i=t+j(s,a++),r,n);else"object"===s&&b("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return o}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function I(e,t){e.func.call(e.context,t,e.count++)}function k(e,t,r){var n=e.result,s=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?N(e,n,r,a.thatReturnsArgument):null!=e&&(_(e)&&(t=s+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(L,"$&/")+"/")+r,e={$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),n.push(e))}function N(e,t,r,n,s){var o="";null!=r&&(o=(""+r).replace(L,"$&/")+"/"),t=R(t,o,n,s),null==e||E(e,"",k,t),T(t)}var P={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return N(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;t=R(null,null,t,r),null==e||E(e,"",I,t),T(t)},count:function(e){return null==e?0:E(e,"",a.thatReturnsNull,null)},toArray:function(e){var t=[];return N(e,t,null,a.thatReturnsArgument),t},only:function(e){return _(e)||b("143"),e}},createRef:function(){return{current:null}},Component:v,PureComponent:C,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},Fragment:u,StrictMode:p,unstable_AsyncMode:f,createElement:B,cloneElement:function(e,t,r){(null===e||void 0===e)&&b("267",e);var s=void 0,o=n({},e.props),a=e.key,i=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(i=t.ref,c=O.current),void 0!==t.key&&(a=""+t.key);var u=void 0;for(s in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)A.call(t,s)&&!x.hasOwnProperty(s)&&(o[s]=void 0===t[s]&&void 0!==u?u[s]:t[s])}if(1===(s=arguments.length-2))o.children=r;else if(1<s){u=Array(s);for(var p=0;p<s;p++)u[p]=arguments[p+2];o.children=u}return{$$typeof:l,type:e.type,key:a,ref:i,props:o,_owner:c}},createFactory:function(e){var t=B.bind(null,e);return t.type=e,t},isValidElement:_,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:O,assign:n}},H=Object.freeze({default:P}),G=H&&P||H;e.exports=G.default?G.default:G},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,i=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in r=Object(arguments[l]))s.call(r,c)&&(i[c]=r[c]);if(n){a=n(r);for(var u=0;u<a.length;u++)o.call(r,a[u])&&(i[a[u]]=r[a[u]])}}return i}},function(e,t,r){"use strict";var n=function(e){};e.exports=function(e,t,r,s,o,a,i,l){if(n(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,s,o,a,i,l],p=0;(c=new Error(t.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,r){"use strict";var n={};e.exports=n},function(e,t,r){"use strict";function n(e){return function(){return e}}var s=function(){};s.thatReturns=n,s.thatReturnsFalse=n(!1),s.thatReturnsTrue=n(!0),s.thatReturnsNull=n(null),s.thatReturnsThis=function(){return this},s.thatReturnsArgument=function(e){return e},e.exports=s},function(e,t,r){"use strict";t.a={chatBubbleWrapper:{position:"relative",marginBottom:2,display:"flex"},chatBubble:{position:"relative",backgroundColor:"#0084FF",borderRadius:7,marginRight:"auto",marginLeft:"auto",maxWidth:"80%",paddingTop:8,paddingBottom:10,paddingLeft:14,paddingRight:14},chatBubbleOrientationNormal:{marginRight:0},recipientChatBubble:{backgroundColor:"#ccc"},recipientChatBubbleOrientationNormal:{marginLeft:0},p:{color:"#FFFFFF",fontSize:16,fontWeight:300,margin:0,marginRight:30},firstChatBubbleInGroup:{borderTopRightRadius:0},recipientFirstChatBubbleInGroup:{borderTopLeftRadius:0},lastChatBubbleInGroup:{borderTopRightRadius:0},recipientLastChatBubbleInGroup:{borderTopLeftRadius:0},centerChatBubbleInGroup:{borderTopRightRadius:0,borderBottomRightRadius:0},recipientCenterChatBubbleInGroup:{borderBottomLeftRadius:0,borderTopLeftRadius:0},createdOn:{position:"absolute",right:14,bottom:2,fontSize:9,color:"rgba(255, 255, 255, 0.55)"},isSend:{position:"absolute",right:2,bottom:2,fontSize:9},lastSeenByContainer:{position:"absolute",right:-30,top:0,width:20,height:"100%"}}},function(e,t,r){"use strict";t.a={chatBubbleWrapper:{marginTop:10,marginBottom:10,position:"relative"},bubbleGroupHeader:{margin:0,fontSize:14,fontWeight:400,color:"#999"}}},function(e,t,r){"use strict";var n=r(0),s=(r.n(n),r(8)),o=r(1),a=r(20),i=r(2),l=r(5),c=r(6),u=r(7),p=r(21),h=r(9),d=r(10),f=r(3),g=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new r(function(t){t(e.value)}).then(a,i)}l((n=n.apply(e,t||[])).next())})};class m extends n.Component{constructor(e){super(e),this.onLoadOldMessages=this.onLoadOldMessages.bind(this),this.state={isLoadingMessages:!1}}onMessageSend(){this.scrollApi&&this.scrollApi.scrollToBottom()}shouldComponentUpdate(e,t){return this.shallowDiffers(this.props,e)||this.shallowDiffers(this.state,t)}componentDidMount(){this.scrollApi&&this.scrollApi.scrollToBottom(!1)}getSnapshotBeforeUpdate(e,t){return{wasScrolledToBottom:this.scrollApi&&this.scrollApi.scrolledToBottom(),scrollHeight:this.scrollApi&&this.scrollApi.scrollHeight(),clientHeight:this.scrollApi&&this.scrollApi.clientHeight()}}componentDidUpdate(e,t,r){if(this.props.messages.length!==e.messages.length&&r&&r.wasScrolledToBottom)this.scrollApi.scrollToBottom(!1);else if(this.props.messages.length!==e.messages.length&&r&&t.isLoadingMessages){const e=this.scrollApi&&this.scrollApi.scrollHeight();this.scrollApi.scrollTo(e-r.scrollHeight,!1)}}shallowDiffers(e,t){for(let r in e)if(!(r in t))return!0;for(let r in t)if(e[r]!==t[r])return!0;return!1}renderMessages(e){const{bubbleStyles:t,customChatBubble:r,showRecipientAvatar:o}=this.props,a=Object(p.a)(e,e=>e.createdOn&&e.createdOn.toDateString());let i=[],l=0;return Object.keys(a).forEach(e=>{let c=[];const u=a[e];u[0]&&u[0].createdOn&&this.props.showDateRow&&i.push(n.createElement(this.props.customDateRow,{key:e,date:u[0].createdOn})),i=i.concat(u.map((e,a)=>{if(c.push(e),!u[a+1]||u[a+1].authorId!==e.authorId){const a=c,i=this.props.authors&&this.props.authors.filter(t=>t.id===e.authorId)[0];return c=[],l++,n.createElement(s.a,{key:l,yourAuthorId:this.props.yourAuthorId,messages:a,author:i,authors:this.props.authors,showRecipientAvatar:o,customChatBubble:r,bubbleStyles:t,showRecipientLastSeenMessage:this.props.showRecipientLastSeenMessage,customAvatar:this.props.customAvatar,customLastSeenAvatar:this.props.customLastSeenAvatar,customSystemChatBubble:this.props.customSystemChatBubble})}return null}))}),i}renderIsTyping(){const e=this.props.authors&&this.props.authors.filter(e=>e.isTyping&&e.id!==this.props.yourAuthorId);return e&&0!==e.length?n.createElement(l.a,{typingAuthors:e}):null}render(){return n.createElement("div",{id:"react-native-bell-chat__chat-panel "+(this.props.className?this.props.className:""),style:Object.assign({},a.a.chatPanel)},n.createElement(this.props.customScrollArea,{minHeight:this.props.minHeight,maxHeight:this.props.maxHeight,apiRef:e=>this.scrollApi=e,loadOldMessagesThreshold:this.props.loadOldMessagesThreshold,onLoadOldMessages:this.onLoadOldMessages},n.createElement("div",{style:Object.assign({},a.a.chatMessages,this.props.showRecipientAvatar&&a.a.showRecipientAvatarChatMessagesStyle,this.props.showRecipientAvatar&&this.props.showRecipientAvatarChatMessagesStyle,this.props.showIsTyping&&a.a.showIsTypingChatMessagesStyle,this.props.showIsTyping&&this.props.showIsTypingChatMessagesStyle,this.props.showRecipientLastSeenMessage&&a.a.showRecipientLastSeenMessageChatMessagesStyle,this.props.showRecipientLastSeenMessage&&this.props.showRecipientLastSeenMessageChatMessagesStyle),className:"react-native-bell-chat__chat-messages"},n.createElement(this.props.customLoadingMessages,{isVisible:this.props.showLoadingMessages||this.state.isLoadingMessages}),this.renderMessages(this.props.messages),this.props.showIsTyping&&this.renderIsTyping())))}onLoadOldMessages(){if(!this.state.isLoadingMessages&&this.props.hasOldMessages)return new Promise(e=>{this.setState({isLoadingMessages:!0},()=>e())}).then(()=>g(this,void 0,void 0,function*(){this.props.onLoadOldMessages&&(yield this.props.onLoadOldMessages())})).then(()=>g(this,void 0,void 0,function*(){yield new Promise(e=>{this.setState({isLoadingMessages:!1},()=>{this.scrollApi.scrolledToLoadThreshold()&&this.scrollApi.scrollTo(this.props.loadOldMessagesThreshold+1,!1),e()})})}))}}t.a=m,m.defaultProps={messages:[],authors:[],customChatBubble:e=>n.createElement(o.a,Object.assign({},e)),customAvatar:i.a,customScrollArea:e=>n.createElement(c.a,Object.assign({},e)),customLastSeenAvatar:u.a,customDateRow:h.a,customLoadingMessages:d.a,yourAuthorId:0,loadOldMessagesThreshold:50,customSystemChatBubble:f.a}},function(e,t,r){"use strict";t.a={chatPanel:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",position:"relative"},showRecipientAvatarChatMessagesStyle:{paddingLeft:50},showIsTypingChatMessagesStyle:{paddingBottom:24,position:"relative"},showRecipientLastSeenMessageChatMessagesStyle:{paddingRight:30},chatBubbleWrapper:{marginTop:10,marginBottom:10,overflow:"auto",position:"relative"},img:{borderRadius:100,bottom:0,left:0,position:"absolute",width:36,zIndex:100},chatMessages:{paddingBottom:10,paddingTop:10}}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n=(e,t)=>{if("function"!=typeof t)throw new Error("groupBy take a function as only parameter");return e.reduce((e,r)=>{let n=t(r);return e[n]||(e[n]=[]),e[n].push(r),e},{})}},function(e,t,r){"use strict";var n=r(0);r.n(n);const s={chatInput:{flex:1},inputStyle:{border:"none",borderTopWidth:"1",borderTopStyle:"solid",borderTopColor:"#ddd",fontSize:"16",outline:"none",padding:"30",width:"100%"}};t.a=(e=>{const{inputStyles:t,inputPlaceholder:r}=e;return n.createElement("div",{className:"react-native-bell-chat__chat-input",style:s.chatInput},n.createElement("input",{type:"text",style:t||s.inputStyle,placeholder:r}))})}])});
//# sourceMappingURL=index.min.js.map