!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react-native"));else if("function"==typeof define&&define.amd)define(["react-native"],t);else{var r="object"==typeof exports?t(require("react-native")):t(e["react-native"]);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/lib/",r(r.s=11)}([function(e,t,r){"use strict";e.exports=r(12)},function(t,r){t.exports=e},function(e,t,r){"use strict";r.d(t,"b",function(){return i});var n=r(0),o=(r.n(n),r(17)),s=r(1);r.n(s);const i={userBubble:{},recipientBubble:{},chatBubble:{},text:{},createdOn:{},recipientCreatedOn:{},loadingSpinnerColor:"rgba(255, 255, 255, 0.55)",isSendIconColor:"#cddc39",systemChatBubbleContainerStyle:{}};t.a=class extends n.Component{constructor(e){super(e),this.state={mouseOverLastSeenContainer:!1}}render(){if(!this.props.message)return null;const{yourAuthorId:e}=this.props;let{bubbleStyles:t}=this.props;t=t||i;const{userBubble:r,chatBubble:a,text:l,recipientBubble:c}=t,u=this.props.message.authorId===e,p=[o.a.chatBubble,u?{}:o.a.recipientChatBubble,u?o.a.chatBubbleOrientationNormal:o.a.recipientChatBubbleOrientationNormal,this.props.isFirstInGroup&&(u?o.a.firstChatBubbleInGroup:o.a.recipientFirstChatBubbleInGroup),this.props.isLastInGroup&&(u?o.a.lastChatBubbleInGroup:o.a.recipientLastChatBubbleInGroup),this.props.isCenterInGroup&&(u?o.a.centerChatBubbleInGroup:o.a.recipientCenterChatBubbleInGroup),a,u?r:c];return n.createElement(s.View,{style:[o.a.chatBubbleWrapper]},n.createElement(s.View,{style:[...p]},n.createElement(s.Text,{style:[o.a.p,l,u?t.userText:t.recipientText]},this.props.message.message),this.props.message.createdOn&&n.createElement(s.Text,{style:[o.a.createdOn,u?t.createdOn:t.recipientCreatedOn]},this.props.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),void 0!==this.props.message.isSend&&u&&n.createElement(s.Text,{style:[o.a.isSend]},this.props.message.isSend?n.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",preserveAspectRatio:"xMidYMid",style:{background:"none"}},n.createElement("path",Object.assign({fill:t.isSendIconColor?t.isSendIconColor:i.isSendIconColor},{},{d:"M9,1.7L8.6,1.4C8.5,1.3,8.3,1.3,8.2,1.4L3.9,7C3.8,7.1,3.6,7.1,3.5,7c0,0,0,0,0,0L1.7,5.3c-0.1-0.1-0.3-0.1-0.4,0L1,5.6 C0.9,5.7,0.9,5.9,1,6l2.6,2.6c0.1,0.1,0.3,0.1,0.4,0L9,2.1C9.1,2,9.1,1.8,9,1.7z"}))):n.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-eclipse",style:{background:"none"}},n.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50",fill:t.loadingSpinnerColor?t.loadingSpinnerColor:i.loadingSpinnerColor,transform:"rotate(78 50 52.5)"},n.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 52.5;360 50 52.5",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))),this.props.showRecipientLastSeenMessage&&this.props.lastSeenByAuthors&&this.props.lastSeenByAuthors.length>0&&this.props.customLastSeenAvatar&&n.createElement(s.View,{style:o.a.lastSeenByContainer},this.props.lastSeenByAuthors.map((e,t)=>n.createElement(this.props.customLastSeenAvatar,{key:t,author:e,containerStyle:Object.assign({},t>0&&!this.state.mouseOverLastSeenContainer?{marginTop:-12}:{marginTop:-4},{zIndex:100+t})}))))}}},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(1));r.n(o);const s={container:{position:"absolute",left:-50,top:0,width:40,height:40,backgroundColor:"rgb(153, 153, 153)",borderRadius:20,borderTopRightRadius:5,alignContent:"center",alignItems:"center",justifyContent:"center"},text:{color:"rgb(255,255,255)",lineHeight:40,fontWeight:"400",textAlign:"center"}};t.a=(e=>e.author&&n.createElement(o.View,{style:[s.container,e.avatarStyles&&e.avatarStyles.containerStyle]},n.createElement(o.Text,{style:[s.text,e.avatarStyles&&e.avatarStyles.textStyle]},e.author.avatarName?e.author.avatarName:e.author.name.split(" ").map(e=>e[0]).join("").toUpperCase().substr(0,3))))},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(2)),s=r(1);r.n(s);const i={container:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}};t.a=(e=>{let{bubbleStyles:t}=e;t=t||o.b;const r=e.message.createdOn&&e.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return e.message&&n.createElement(s.View,{style:[i.container,t.systemChatBubbleContainerStyle]},r&&n.createElement(s.Text,null,r,":"," "),n.createElement(s.Text,null,e.message.message))})},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(1));r.n(o);const s={container:{position:"absolute",bottom:2,left:0,right:0,color:"rgb(204, 204, 204)",textAlign:"center"}};t.a=(e=>e.typingAuthors&&e.typingAuthors.length>0&&n.createElement(o.Text,{style:s.container},e.typingAuthors.map(e=>e.name).join(", ").replace(/,(?!.*,)/gim," and")+(1===e.typingAuthors.length?" is ":" are ")+"typing"))},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(1));r.n(o);const s={chatHistory:{padding:"0 10px"}};t.a=class extends n.Component{constructor(e){super(e),this.clientHeight=0,this.scrollHeight=0,this.scrollTop=0}render(){return n.createElement(o.ScrollView,{onLayout:e=>{this.clientHeight=e.nativeEvent.layout.height},contentContainerStyle:{padding:10},ref:e=>{this.scrollContainer=e,this.props.apiRef&&this.props.apiRef({scrollToBottom:(t=!0)=>e&&e.scrollToEnd({animated:t}),scrollTo:(t,r=!0)=>e&&e.scrollTo({y:t,animated:r}),scrolledToBottom:()=>this.clientHeight+this.scrollTop===this.scrollHeight,scrolledToLoadThreshold:()=>this.scrollContainer&&this.scrollTop<=this.props.loadOldMessagesThreshold,scrollTop:()=>this.scrollContainer&&this.scrollTop,scrollHeight:()=>this.scrollContainer&&this.scrollHeight,clientHeight:()=>this.scrollContainer&&this.clientHeight})},style:[s.chatHistory,void 0!==this.props.maxHeight?{maxHeight:this.props.maxHeight}:{},void 0!==this.props.minHeight?{minHeight:this.props.minHeight}:{},this.props.containerStyles],onScroll:e=>{this.scrollContainer&&e.nativeEvent.contentOffset.y<=this.props.loadOldMessagesThreshold&&this.props.onLoadOldMessages(),this.scrollTop=e.nativeEvent.contentOffset.y},scrollEventThrottle:16},n.createElement(o.View,{onLayout:e=>{this.scrollHeight=e.nativeEvent.layout.height+20}},this.props.children))}}},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(1));r.n(o);const s={container:{width:20,height:20,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:10,textAlign:"center",transition:"0.3s all ease-in-out"},text:{fontSize:10,lineHeight:20,fontWeight:"400"}};t.a=(e=>e.author&&n.createElement(o.View,{style:[s.container,e.containerStyle]},n.createElement(o.Text,{style:[]},e.author.lastSeenAvatarName?e.author.lastSeenAvatarName:e.author.name[0].toUpperCase())))},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(2)),s=r(4),i=r(18),a=r(3);class l extends n.Component{constructor(e){super(e)}renderGroup(e,t){const{bubblesCentered:r,bubbleStyles:a,showRecipientAvatar:l,customChatBubble:c,customSystemChatBubble:u,showRecipientLastSeenMessage:p,customLastSeenAvatar:h}=this.props,d=c||o.a,f=u||s.a,g=e.map((o,s)=>{const i={key:s,yourAuthorId:this.props.yourAuthorId,author:t,message:o,bubblesCentered:r,bubbleStyles:a,isFirstInGroup:0===s,isLastInGroup:s===e.length-1&&e.length>1,isCenterInGroup:s<e.length-1&&e.length>1,lastSeenByAuthors:this.props.authors&&this.props.authors.filter(e=>void 0!==e.lastSeenMessageId&&e.lastSeenMessageId===o.id),showRecipientLastSeenMessage:p,customLastSeenAvatar:h};return void 0!==o.authorId?n.createElement(d,Object.assign({},i)):n.createElement(f,Object.assign({},i))}),m=t&&this.props.yourAuthorId===t.id;return n.createElement("div",{style:i.a.chatBubbleWrapper},!m&&l&&t&&this.props.customAvatar&&this.props.customAvatar({author:this.props.author}),g)}render(){const{messages:e,author:t}=this.props;return this.renderGroup(e,t)}}t.a=l,l.defaultProps={messages:[],author:void 0,customAvatar:a.a,showRecipientLastSeenMessage:!1}},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(1));r.n(o);const s={container:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}};t.a=(e=>e.date&&n.createElement(o.Text,{style:[s.container,e.containerStyles]},e.date.toLocaleDateString()))},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(1));r.n(o);const s={containerStyles:{display:"flex",marginBottom:10}},i=e=>{const{containerStyles:t}=e;return n.createElement(o.View,{style:[s.containerStyles,t]},n.createElement("svg",{width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none",margin:"auto",fill:e.spinnerColor,opacity:e.isVisible?1:0,transition:"0.3s all ease-in-out"}},n.createElement("title",null,"Loading messages"),n.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 46 0 0 1 10 50",transform:"rotate(42 50 53)"},n.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 53;360 50 53",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))};i.defaultProps={spinnerColor:"rgb(0, 132, 255)"},t.a=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=r(3),s=r(5),i=r(6),a=r(7),l=r(8),c=r(19),u=r(22),p=r(4),h=r(9),d=r(10);r.d(t,"ChatFeed",function(){return c.a}),r.d(t,"ChatInput",function(){return u.a}),r.d(t,"LoadingMessages",function(){return d.a}),r.d(t,"DateRow",function(){return h.a}),r.d(t,"ChatBubble",function(){return n.a}),r.d(t,"SystemChatBubble",function(){return p.a}),r.d(t,"BubbleGroup",function(){return l.a}),r.d(t,"Avatar",function(){return o.a}),r.d(t,"LastSeenAvatar",function(){return a.a}),r.d(t,"IsTyping",function(){return s.a}),r.d(t,"ChatScrollArea",function(){return i.a})},function(e,t,r){"use strict";
/** @license React v16.3.2
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(13),o=r(14),s=r(15),i=r(16),a="function"==typeof Symbol&&Symbol.for,l=a?Symbol.for("react.element"):60103,c=a?Symbol.for("react.portal"):60106,u=a?Symbol.for("react.fragment"):60107,p=a?Symbol.for("react.strict_mode"):60108,h=a?Symbol.for("react.provider"):60109,d=a?Symbol.for("react.context"):60110,f=a?Symbol.for("react.async_mode"):60111,g=a?Symbol.for("react.forward_ref"):60112,m="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t=arguments.length-1,r="http://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);o(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function v(e,t,r){this.props=e,this.context=t,this.refs=s,this.updater=r||y}function S(){}function w(e,t,r){this.props=e,this.context=t,this.refs=s,this.updater=r||y}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&b("85"),this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=v.prototype;var C=w.prototype=new S;C.constructor=w,n(C,v.prototype),C.isPureReactComponent=!0;var x={current:null},A=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,r){var n=void 0,o={},s=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)A.call(t,n)&&!T.hasOwnProperty(n)&&(o[n]=t[n]);var a=arguments.length-2;if(1===a)o.children=r;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===o[n]&&(o[n]=a[n]);return{$$typeof:l,type:e,key:s,ref:i,props:o,_owner:x.current}}function B(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var R=/\/+/g,M=[];function L(e,t,r,n){if(M.length){var o=M.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function E(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function I(e,t,r,n){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var s=!1;if(null===e)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case l:case c:s=!0}}if(s)return r(n,e,""===t?"."+j(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var i=0;i<e.length;i++){var a=t+j(o=e[i],i);s+=I(o,a,r,n)}else if(null===e||void 0===e?a=null:a="function"==typeof(a=m&&e[m]||e["@@iterator"])?a:null,"function"==typeof a)for(e=a.call(e),i=0;!(o=e.next()).done;)s+=I(o=o.value,a=t+j(o,i++),r,n);else"object"===o&&b("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return s}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function k(e,t){e.func.call(e.context,t,e.count++)}function _(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?P(e,n,r,i.thatReturnsArgument):null!=e&&(B(e)&&(t=o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(R,"$&/")+"/")+r,e={$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),n.push(e))}function P(e,t,r,n,o){var s="";null!=r&&(s=(""+r).replace(R,"$&/")+"/"),t=L(t,s,n,o),null==e||I(e,"",_,t),E(t)}var H={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return P(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;t=L(null,null,t,r),null==e||I(e,"",k,t),E(t)},count:function(e){return null==e?0:I(e,"",i.thatReturnsNull,null)},toArray:function(e){var t=[];return P(e,t,null,i.thatReturnsArgument),t},only:function(e){return B(e)||b("143"),e}},createRef:function(){return{current:null}},Component:v,PureComponent:w,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},Fragment:u,StrictMode:p,unstable_AsyncMode:f,createElement:O,cloneElement:function(e,t,r){(null===e||void 0===e)&&b("267",e);var o=void 0,s=n({},e.props),i=e.key,a=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,c=x.current),void 0!==t.key&&(i=""+t.key);var u=void 0;for(o in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)A.call(t,o)&&!T.hasOwnProperty(o)&&(s[o]=void 0===t[o]&&void 0!==u?u[o]:t[o])}if(1===(o=arguments.length-2))s.children=r;else if(1<o){u=Array(o);for(var p=0;p<o;p++)u[p]=arguments[p+2];s.children=u}return{$$typeof:l,type:e.type,key:i,ref:a,props:s,_owner:c}},createFactory:function(e){var t=O.bind(null,e);return t.type=e,t},isValidElement:B,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:x,assign:n}},G=Object.freeze({default:H}),F=G&&H||G;e.exports=F.default?F.default:F},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,i,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in r=Object(arguments[l]))o.call(r,c)&&(a[c]=r[c]);if(n){i=n(r);for(var u=0;u<i.length;u++)s.call(r,i[u])&&(a[i[u]]=r[i[u]])}}return a}},function(e,t,r){"use strict";var n=function(e){};e.exports=function(e,t,r,o,s,i,a,l){if(n(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,o,s,i,a,l],p=0;(c=new Error(t.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,r){"use strict";var n={};e.exports=n},function(e,t,r){"use strict";function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,r){"use strict";t.a={chatBubbleWrapper:{position:"relative",marginBottom:2,display:"flex"},chatBubble:{position:"relative",backgroundColor:"#0084FF",borderRadius:7,marginRight:"auto",marginLeft:"auto",maxWidth:"80%",paddingTop:8,paddingBottom:10,paddingLeft:14,paddingRight:14},chatBubbleOrientationNormal:{marginRight:0},recipientChatBubble:{backgroundColor:"#ccc"},recipientChatBubbleOrientationNormal:{marginLeft:0},p:{color:"#FFFFFF",fontSize:16,fontWeight:"300",margin:0,marginRight:30},firstChatBubbleInGroup:{borderTopRightRadius:0},recipientFirstChatBubbleInGroup:{borderTopLeftRadius:0},lastChatBubbleInGroup:{borderTopRightRadius:0},recipientLastChatBubbleInGroup:{borderTopLeftRadius:0},centerChatBubbleInGroup:{borderTopRightRadius:0,borderBottomRightRadius:0},recipientCenterChatBubbleInGroup:{borderBottomLeftRadius:0,borderTopLeftRadius:0},createdOn:{position:"absolute",right:14,bottom:2,fontSize:9,color:"rgba(255, 255, 255, 0.55)"},isSend:{position:"absolute",right:2,bottom:2,fontSize:9},lastSeenByContainer:{position:"absolute",right:-30,top:0,width:20,height:"100%"}}},function(e,t,r){"use strict";t.a={chatBubbleWrapper:{marginTop:10,marginBottom:10,position:"relative"},bubbleGroupHeader:{margin:0,fontSize:14,fontWeight:400,color:"#999"}}},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(8)),s=r(2),i=r(20),a=r(3),l=r(5),c=r(6),u=r(7),p=r(21),h=r(9),d=r(10),f=r(4),g=r(1),m=(r.n(g),this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,a)}l((n=n.apply(e,t||[])).next())})});class b extends n.Component{constructor(e){super(e),this.onLoadOldMessages=this.onLoadOldMessages.bind(this),this.state={isLoadingMessages:!1}}onMessageSend(){this.scrollApi&&this.scrollApi.scrollToBottom()}shouldComponentUpdate(e,t){return this.shallowDiffers(this.props,e)||this.shallowDiffers(this.state,t)}componentDidMount(){this.scrollApi&&this.scrollApi.scrollToBottom(!1)}getSnapshotBeforeUpdate(e,t){return{wasScrolledToBottom:this.scrollApi&&this.scrollApi.scrolledToBottom(),scrollHeight:this.scrollApi&&this.scrollApi.scrollHeight(),clientHeight:this.scrollApi&&this.scrollApi.clientHeight()}}componentDidUpdate(e,t,r){if(this.props.messages.length!==e.messages.length&&r&&r.wasScrolledToBottom)this.scrollApi.scrollToBottom(!1);else if(this.props.messages.length!==e.messages.length&&r&&t.isLoadingMessages){const e=this.scrollApi&&this.scrollApi.scrollHeight();this.scrollApi.scrollTo(e-r.scrollHeight,!1)}}shallowDiffers(e,t){for(let r in e)if(!(r in t))return!0;for(let r in t)if(e[r]!==t[r])return!0;return!1}renderMessages(e){const{bubbleStyles:t,customChatBubble:r,showRecipientAvatar:s}=this.props,i=Object(p.a)(e,e=>e.createdOn&&e.createdOn.toDateString());let a=[],l=0;return Object.keys(i).forEach(e=>{let c=[];const u=i[e];u[0]&&u[0].createdOn&&this.props.showDateRow&&a.push(n.createElement(this.props.customDateRow,{key:e,date:u[0].createdOn})),a=a.concat(u.map((e,i)=>{if(c.push(e),!u[i+1]||u[i+1].authorId!==e.authorId){const i=c,a=this.props.authors&&this.props.authors.filter(t=>t.id===e.authorId)[0];return c=[],l++,n.createElement(o.a,{key:l,yourAuthorId:this.props.yourAuthorId,messages:i,author:a,authors:this.props.authors,showRecipientAvatar:s,customChatBubble:r,bubbleStyles:t,showRecipientLastSeenMessage:this.props.showRecipientLastSeenMessage,customAvatar:this.props.customAvatar,customLastSeenAvatar:this.props.customLastSeenAvatar,customSystemChatBubble:this.props.customSystemChatBubble})}return null}))}),a}renderIsTyping(){const e=this.props.authors&&this.props.authors.filter(e=>e.isTyping&&e.id!==this.props.yourAuthorId);return e&&0!==e.length?n.createElement(l.a,{typingAuthors:e}):null}render(){return n.createElement(g.View,{style:[i.a.chatPanel]},n.createElement(this.props.customScrollArea,{minHeight:this.props.minHeight,maxHeight:this.props.maxHeight,apiRef:e=>this.scrollApi=e,loadOldMessagesThreshold:this.props.loadOldMessagesThreshold,onLoadOldMessages:this.onLoadOldMessages},n.createElement(g.View,{style:[i.a.chatMessages,this.props.showRecipientAvatar&&i.a.showRecipientAvatarChatMessagesStyle,this.props.showRecipientAvatar&&this.props.showRecipientAvatarChatMessagesStyle,this.props.showIsTyping&&i.a.showIsTypingChatMessagesStyle,this.props.showIsTyping&&this.props.showIsTypingChatMessagesStyle,this.props.showRecipientLastSeenMessage&&i.a.showRecipientLastSeenMessageChatMessagesStyle,this.props.showRecipientLastSeenMessage&&this.props.showRecipientLastSeenMessageChatMessagesStyle]},n.createElement(this.props.customLoadingMessages,{isVisible:this.props.showLoadingMessages||this.state.isLoadingMessages}),this.renderMessages(this.props.messages),this.props.showIsTyping&&this.renderIsTyping())))}onLoadOldMessages(){if(!this.state.isLoadingMessages&&this.props.hasOldMessages)return new Promise(e=>{this.setState({isLoadingMessages:!0},()=>e())}).then(()=>m(this,void 0,void 0,function*(){this.props.onLoadOldMessages&&(yield this.props.onLoadOldMessages())})).then(()=>m(this,void 0,void 0,function*(){yield new Promise(e=>{this.setState({isLoadingMessages:!1},()=>{this.scrollApi.scrolledToLoadThreshold()&&this.scrollApi.scrollTo(this.props.loadOldMessagesThreshold+1,!1),e()})})}))}}t.a=b,b.defaultProps={messages:[],authors:[],customChatBubble:e=>n.createElement(s.a,Object.assign({},e)),customAvatar:a.a,customScrollArea:e=>n.createElement(c.a,Object.assign({},e)),customLastSeenAvatar:u.a,customDateRow:h.a,customLoadingMessages:d.a,yourAuthorId:0,loadOldMessagesThreshold:50,customSystemChatBubble:f.a}},function(e,t,r){"use strict";t.a={chatPanel:{overflow:"hidden"},showRecipientAvatarChatMessagesStyle:{paddingLeft:50},showIsTypingChatMessagesStyle:{paddingBottom:24,position:"relative"},showRecipientLastSeenMessageChatMessagesStyle:{paddingRight:30},chatBubbleWrapper:{marginTop:10,marginBottom:10,overflow:"visible"},img:{borderRadius:100,bottom:0,left:0,position:"absolute",width:36,zIndex:100},chatMessages:{paddingBottom:10,paddingTop:10}}},function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n=(e,t)=>{if("function"!=typeof t)throw new Error("groupBy take a function as only parameter");return e.reduce((e,r)=>{let n=t(r);return e[n]||(e[n]=[]),e[n].push(r),e},{})}},function(e,t,r){"use strict";var n=r(0),o=(r.n(n),r(1));r.n(o);const s={chatInput:{flex:1},inputStyle:{border:"none",borderTopWidth:"1",borderTopStyle:"solid",borderTopColor:"#ddd",fontSize:"16",outline:"none",padding:"30",width:"100%"}};t.a=(e=>{const{inputStyles:t,inputPlaceholder:r}=e;return n.createElement(o.View,{style:s.chatInput},n.createElement(o.TextInput,{style:[t||s.inputStyle],placeholder:r}))})}])});
//# sourceMappingURL=index.min.js.map